<html>

<head>
    <title>JavaScript TCR POC</title>
    <meta name="viewport" content="width=100%, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0,target-densitydpi=device-dpi, user-scalable=no" />
<style>
    html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
      margin: 0;
      padding: 0;
      border: 0;
      font-size: 100%;
      font: inherit;
      vertical-align: baseline; }
    
    /* HTML5 display-role reset for older browsers */
    article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section {
      display: block; }
    
    body {
      line-height: 1; }
    
    ol, ul {
      list-style: none; }
    
    blockquote, q {
      quotes: none; }
    
    blockquote:before, blockquote:after {
      content: '';
      content: none; }
    
    q:before, q:after {
      content: '';
      content: none; }
    
    table {
      border-collapse: collapse;
      border-spacing: 0; }
    
    * {
      box-sizing: border-box; }
    
    body {
      background: #ccc; }
    
    header {
      background: #000;
      color: #fff;
      padding: 10px 20px;
      margin-bottom: 10px; }
      header h1 {
        font-family: SegoeUI;
        font-size: 14px;
        font-size: 1.4rem;
        font-weight: bold;
        text-align: center; }
    
    main {
      background: #fff;
      font-family: SegoeUI;
      font-weight: normal;
      font-size: 16px;
      font-size: 1.6rem;
      padding: 16px 20px; }
      main h2 {
        font-family: SegoeUI;
        font-size: 20px;
        font-size: 2rem;
        font-weight: bold;
        margin-bottom: 8px; }
      main h3, main #headerDecimal {
        font-family: SegoeUI;
        font-size: 16px;
        font-size: 1.6rem;
        font-weight: bold;
        margin-bottom: 8px; }
      main p, main span, main label {
        font-size: 16px;
        font-size: 1.6rem;
        font-family: SegoeUI;
        font-weight: normal; }
      main input[type="button"].primary {
        display: block;
        background-color: #00823b;
        color: #fff;
        font-size: 16px;
        font-size: 1.6rem;
        border: 0;
        padding: 16px 13px;
        text-align: center;
        width: 100%;
        margin-top: 8px; }
      main input[type="button"].secondary {
        display: block;
        background-color: #fff;
        color: #2b8cc4;
        font-size: 16px;
        font-size: 1.6rem;
        border: 0;
        padding: 16px 13px;
        text-align: center;
        width: 100%; }
      main input[type="number"] {
        border: 1px solid;
        width: 100%;
        margin-top: 8px;
        padding: 5px; }
      main .container {
        display: table; }
        main .container > div {
          display: table-row; }
          main .container > div label {
            display: table-cell;
            padding: 0 0 10px 10px; }
          main .container > div input[type="checkbox"], main .container > div input[type="radio"] {
            display: table-cell; }
      main ul {
        padding-left: 30px;
        margin: 8px 0 16px; }
        main ul li {
          display: list-item;
          list-style: disc outside; }
          main ul li h4 {
            font-weight: bold; }
    
    input ~ .showIfChecked input {
      height: 0;
      width: 0;
      opacity: 0;
      position: relative;
      top: 2rem; }
    
    input:checked ~ .showIfChecked {
      height: auto;
      width: auto; }
      input:checked ~ .showIfChecked input {
        height: auto;
        opacity: 1;
        transition: opacity 1s linear; }
    
    /*
        POC Stuff
      */
    p.one {
      border-style: solid;
      border-width: 5px; }
    
    h1.hidden {
      visibility: hidden; }
    
</style>

<script type="text/javascript">
    var map = new Map();

    function removeChildren(div) {
        var node = document.getElementById(div)
        while (node.hasChildNodes()) {
            node.removeChild(node.lastChild);
        }
    }

    // Update the id attribute fields of cloned row.
    function updateChildren(id, i) {
        var itm = document.getElementById(id);
        var cln = itm.cloneNode(true);
        var children = cln.children;

        cln.id = cln.id + "_" + i;
        for (c = 0; c < children.length; c++) {
            cur = children[c];
            if (cur.nodeType === 1 && cur.id) {
                cur.id = cur.id + "_" + i;
            }
        }

        containerDiv.appendChild(cln);

// TODO...generic recursive function.
         var element = document.getElementById('row_div_checkbox_ID_'+i);
         if (element != null) {
            var child = element.children;
            for (c = 0; c < child.length; c++) {
                cur = child[c];
                if (cur.nodeType === 1 && cur.id) {
                    cur.id = cur.id + "_" + i;
                }
            }

             element = document.getElementById('number_entry_hidden_'+i);
             if (element != null) {
                var child = element.children;
                for (c = 0; c < child.length; c++) {
                    cur = child[c];
                    if (cur.nodeType === 1 && cur.id) {
                        cur.id = cur.id + "_" + i;
                    }
                }
            }
        }
    }

    function dynamicRadioButton(selectionType) {
        var questionData = getFromId(questionPos);
        var arrayLength = questionData.questionType.multipleChoiceOptions.length;

        // Remove all child nodes.
        removeChildren("containerDiv");

        // Create child nodes based on current question type.
        for (var i = 0; i < arrayLength; i++) {

            // Clone the associated input row based on type.
            updateChildren("row_ID_"+selectionType, i);

            // Obtain handle to the radio button.
            var radioButton = document.getElementById("row_"+selectionType+"_ID_"+i);
            // Set text label.
            var label = document.getElementById("row_label_"+selectionType+"_ID_"+i);
            label.innerHTML = questionData.questionType.multipleChoiceOptions[i].option;
            // Check if the button (checkbox or radio) was previously selected.
            if (map.get(questionData.questionType.multipleChoiceOptions[i].modelId) == "true") {
                radioButton.setAttribute("checked","checked");
            } else if (map.has(questionData.questionType.multipleChoiceOptions[i].modelId) && selectionType=="checkbox") {
                // Default the checkbox as checked and display the input number field.
                radioButton.setAttribute("checked","checked");
                show('number_entry_hidden_'+i);
            }

            // update the controls based on type.
            if (selectionType == 'radio') {
                radioButton.setAttribute("id", questionData.questionType.multipleChoiceOptions[i].modelId);
                radioButton.setAttribute("name", "radio");  // TODO...if multiple radio buttons can be selected? If yes then drop name.
                label.setAttribute("for", questionData.questionType.multipleChoiceOptions[i].modelId);
            } else if (selectionType == "checkbox") {

                // Set the id of the number input field.
                var input = document.getElementById("row_number_"+selectionType+"_ID_"+i);
                radioButton.setAttribute("id", questionData.questionType.multipleChoiceOptions[i].modelId + "_INPUT");
                radioButton.setAttribute("name", questionData.questionType.multipleChoiceOptions[i].modelId + "_INPUT");
                label.setAttribute("for", questionData.questionType.multipleChoiceOptions[i].modelId + "_INPUT");
                if (map.has(questionData.questionType.multipleChoiceOptions[i].modelId)) {
                    input.setAttribute("value", map.get(questionData.questionType.multipleChoiceOptions[i].modelId));
                }
                
            }
        }

        // Set the next onClick function based on the type of control.
        if (selectionType == "checkbox") {
          document.getElementById("MultipleChoiceNEXT").onclick = function() {
                    MultipleChoiceNEXT();
                };
        } else {
          document.getElementById("MultipleChoiceNEXT").onclick = function() {
                    NEXT();
                };
        }

        insertDynamicHeader(questionData, "dynamicHeader-MultipleChoice");
    }

    function insertDynamicHeader(questionData, dynamicHeaderDiv) {
        // Check if dynamic header should be added to question.
        if (questionData.questionType.headerDiv !== undefined) {
            removeChildren(dynamicHeaderDiv);
            var itm = document.getElementById(questionData.questionType.headerDiv);
            var cln = itm.cloneNode(true);
            var insertPoint = document.getElementById(dynamicHeaderDiv);
            insertPoint.appendChild(cln);
        }

    }

</script>

<script language=javascript type="text/javascript">
    var START_QUESTION     = "1";
    var   AUTO_RENEWAL     = "R";
    var   SINGLE_APPLICANT = "D";

    var questionPos = START_QUESTION;
    var stack = [];
    var dynamicControls = ["Boolean", "MultipleChoice",  "Decimal", "Continue"];

    function toggleControls(toggle) {
        dynamicControls.forEach((item) => {
            if (toggle == "show") show(item); else hide(item);
        });
    }

    function canGoBack() {
        return(stack.length == 0 ? "true" : "false");
    }

    function BACK() {
        if (stack.length == 0) {
            questionPos = START_QUESTION;
        } else {
            questionPos = stack.pop();
        }
        toggleControls("hide");
        displayQuestion();
    }

    // TODO...EXTEND ERROR HANDLING.
    function resume(model) {
        hide("demo");
        map = new Map();
        stack = [];

        var tokens = model.split(",");
        tokens.forEach(token => {
         var data = token.split(":");
         map.set(data[0],data[1]);
         });

         // Build the question stack.
         var stackData = map.get("stackDATA");
         if (stackData !== undefined) {
            var stackTokens = stackData.split("-");

            stackTokens.forEach(position => {
                stack.push(position);
            });
        }

        // Set the current question.
        questionPos = map.get("currentQuestionPos");
        if (questionPos === undefined) {
            alert("Failed to resume the application since question is missing!");
        } else {
            toggleControls("hide");
            displayQuestion();
        }
    }

    function getModelData() {
        var dumpData = "";
        var first = true;
        var append = "";

        // Record the current question position.
        map.set("currentQuestionPos", questionPos);

        // Record the stack.
        var stackData="";
        // Build the stack.
        for (i = 0; i < stack.length; i++) {
            stackData = stackData + stack[i];
            if (i != stack.length-1) {
                stackData = stackData + "-";
            }
        }
        map.set("stackDATA", stackData);

        // Serialize the map to a string.
        map.forEach((value, key) => {
            if (first) {
                first=false;
                append="";
            } else {
                append=",";
            }
            dumpData = dumpData + append + key+":"+value;
        });

        debugOut(dumpData, "dumpText");
        return(dumpData);
    }

    function debugOut(dumpData, element) {
        var span = document.getElementById(element);
        text = document.createTextNode(dumpData);
        span.innerHTML = ''; // clear existing
        span.appendChild(text);
        return(dumpData);
    }

    // TODO: Move to debug script
    function extractAPI() {
        var apiJson = buildSubmissionPostRequest();
        var span = document.getElementById("dumpText"),
        text = document.createTextNode(apiJson);
        span.innerHTML = ''; // clear existing
        span.appendChild(text);
    }

    function getFromId(id) {
        var arrayLength = data().questions.length;
        for (var i = 0; i < arrayLength; i++) {
            if (data().questions[i].id == id) {
                return data().questions[i];
            }
        }
        alert("FAILED TO FIND ID ["+id+"]!!!");
    }

    function toggleRadioButton(id) {
    var radio = document.getElementById(id);
        if (radio.checked == true) {
            map.set(id, "true");
        } else {
            map.set(id, "false");
        }
    }

    // TODO..validation and error handling!
    function MultipleChoiceNEXT() {

        var questionData = getFromId(questionPos);
        var arrayLength = questionData.questionType.multipleChoiceOptions.length;

        // Cycle around associated checkbox input fields and check if ticked.
        for (var i = 0; i < arrayLength; i++) {
            // Obtain handle to checkbox.
            var inputField = document.getElementById(questionData.questionType.multipleChoiceOptions[i].modelId + "_INPUT");
            if (inputField.checked == true) {
                var element = document.getElementById("row_number_checkbox_ID_"+i)
                console.log(element)
                // Obtain the input value for the associated field and update map.
                var input = element.value;

                map.set(questionData.questionType.multipleChoiceOptions[i].modelId, input);
            } else {
                // Not ticked, remove from map.
                map.delete(questionData.questionType.multipleChoiceOptions[i].modelId);
            }
        }

        // Route to next question.
        stack.push(questionPos);
        var question = getFromId(questionPos);
        questionPos = question.questionType.nextQuestionId;
        displayQuestion();
    }

    // TODO...Add validation. Define in future ticket.
    function NEXT_DECIMAL() {
        stack.push(questionPos);
        var question = getFromId(questionPos);
        questionPos = question.questionType.nextQuestionId;

        var decimalInput = document.getElementById("DecimalInput").value;
        map.set(question.questionType.modelId, decimalInput+"");
        displayQuestion();
    }

    function NEXT(nextId) {
        var question = getFromId(questionPos);
        var arrayLength = question.questionType.multipleChoiceOptions.length;

        // TODO: This is temp code to handle Next button. Do not route to Next if no options selected.
        var enableNext=false;
        // Cycle around associated checkbox input fields and check if ticked.
        for (var i = 0; i < arrayLength; i++) {
            // Obtain handle to checkbox.
            var inputField = document.getElementById(question.questionType.multipleChoiceOptions[i].modelId).checked;
            // Check if the control is checked.
            if (inputField == true) {
                map.set(question.questionType.multipleChoiceOptions[i].modelId, "true");
                enableNext = true;
            } else {
                map.set(question.questionType.multipleChoiceOptions[i].modelId, "false");
            }
        }

        if (enableNext == false) {
            alert(' Please select one of the options to continue.');
        } else {
            stack.push(questionPos);
            questionPos = question.questionType.nextQuestionId;
            displayQuestion();
        }
    }

    function NEXT_CONTINUE() {
        var question = getFromId(questionPos);
        stack.push(questionPos);
        questionPos = question.questionType.nextQuestionId;
        displayQuestion();
    }

    function NEXT_BOOLEAN_CONTINUE() {
        var question = getFromId(questionPos);
        if (document.getElementById('boolean_no').checked == true || document.getElementById('boolean_yes').checked == true) {
            stack.push(questionPos);
        }

        var route=false;
        if (document.getElementById('boolean_no').checked == true) {
            questionPos = question.questionType.noNextQuestionId;
            route=true;
        } else if (document.getElementById('boolean_yes').checked == true) {
            questionPos = question.questionType.yesNextQuestionId;
            route=true;
        } else alert('Please select one of the options.');

        if (route) {
            displayQuestion();
        }
    }

    function YES() {
        var question = getFromId(questionPos);
        if (question.questionType.modelId !== "undefined") {
            map.set(question.questionType.modelId, "true");
        }
    }

    function NO() {
        var question = getFromId(questionPos);

        if (question.questionType.modelId !== "undefined") {
            map.set(question.questionType.modelId, "false");
        }
    }

    function startDemo() {
        toggleControls();
        hide("demo");

        // Invoke the startup function and supply dummy data. This test data will run through complex set of questions.
        startup("D", false, "CS700100AD", "1/1/2017", "2/2/2017");
    }

    function initQuestion(question, control, header) {
        var questionOutput = question.question

        // If previousQuestionOption defined then the question text is appended with the question multi-option name of the associated question.
        if (question.previousQuestionOption) {
            var linkQuestion = getFromId(question.previousQuestionOption);
            var arrayLength = linkQuestion.questionType.multipleChoiceOptions.length;
            // Obtain the option name of the selected value!

            var optionValue="";
            // Cycle around associated checkbox input fields and check if ticked.
            for (var i = 0; i < arrayLength; i++) {
                var mapEntry = map.get(linkQuestion.questionType.multipleChoiceOptions[i].modelId);
                // Check if the control was checked.
                if (mapEntry !== undefined && mapEntry == "true") {
                    optionValue = linkQuestion.questionType.multipleChoiceOptions[i].option;
                    break;
                }
            }
            // Append the output question with the name of the previous selected radio button.
            questionOutput = questionOutput + optionValue + "?";
        }

        document.getElementById(header).innerHTML = questionOutput;
        toggleControls("hide");
        show(control);
    }

    function displayQuestion() {
        var question = getFromId(questionPos);

        var trace = "Question:"+questionPos+"-"+question.questionType.type
        // Trace for current question Id.
         debugOut(trace, "QuestionId");


        if (question.questionType.type == "JourneyCompleteAutoRenewal") {
            // This indicates end of journey for auto renewals!
            toggleControls("hide");
            hook("JourneyCompleteAutoRenewal");
            return;
        } else if (question.questionType.type == "JourneyComplete") {
            // This indicates end of journey for all complete renewal journeys where the  renewal is not auto!
            toggleControls("hide");
            hook("JourneyComplete");
            return;
        } else if (question.questionType.type == "RouteToChangeOfCircumstance") {
            // This indicates end of journey for all complete renewal journeys where the  renewal is not auto!
            toggleControls("hide");
            var response = "JourneyComplete";

            var yesOption = map.get("coc.report-yes");
            if (yesOption !== undefined && yesOption == "true") {
                response = "RouteToChangeOfCircumstance";
            }

            hook(response);
            return;
        } else if (question.questionType.type == "Continue") {
            initQuestion(question, 'Continue', 'headerContinue');
            insertDynamicHeader(question, "dynamicHeader-Continue");
        } else if (question.questionType.type == "Boolean") {
            initQuestion(question, 'Boolean', 'headerBoolean');
            insertDynamicHeader(question, "dynamicHeader-Boolean");

            //  Default the value.
            if (question.questionType.modelId !== "undefined") {
                var checked = map.get(question.questionType.modelId);
                if (checked !== undefined) {
                    document.getElementById(checked == "false" ? 'boolean_no' : 'boolean_yes').checked = checked;
                } else {
                 document.getElementById('boolean_no').checked = false;
                 document.getElementById('boolean_yes').checked = false;
                }
            } else alert(' BOOLEAN MODEL FIELD MISSING!');  // todo...add error handling function!

        } else if (question.questionType.type == "MultipleChoice") {
            initQuestion(question, 'MultipleChoice', 'headerMultipleChoice');
            dynamicRadioButton("radio");
        } else if (question.questionType.type == "MultipleChoiceWithNumber") {
            initQuestion(question, 'MultipleChoice', 'headerMultipleChoice');
            dynamicRadioButton("checkbox");
        } else if (question.questionType.type == "Decimal") {
            initQuestion(question, 'Decimal', 'headerDecimal');
            insertDynamicHeader(question, "dynamicHeader-Decimal");

            // Populate Decimal value from model if exists.
            var question = getFromId(questionPos);
            var decimalStore = map.get(question.questionType.modelId);
            if (decimalStore === undefined) {
                // Clear any previous entry in the field.
                document.getElementById('DecimalInput').value = ""
            } else if (decimalStore != "") {
                document.getElementById('DecimalInput').value = decimalStore;
            }

            // Toggle estimated-income checkbox if modelIdEstimatedIncome element defined in model.
            hide('estimatedIncomeDiv');
            if (question.questionType.modelIdEstimatedIncome !== undefined) {
                var estimatedIncome = map.get(question.questionType.modelIdEstimatedIncome);
                show('estimatedIncomeDiv');
                // Set the checked state based on model value.
                if (estimatedIncome == 'true') {
                    document.getElementById('estimatedIncomeValue').checked = true;
                } else {
                 document.getElementById('estimatedIncomeValue').checked = false;
                }
            }
        } else {
            alert('Failed to resolve the question type ' + question.questionType.type);
        }
    }

    function getMapBooleanValue(modelId) {
        var mapValue = map.get(modelId);
        var rtn = false;

        if (mapValue !== undefined) {
            if (mapValue == 'true') {
                rtn = true;
            }
        }
        return(rtn);
    }

    function buildTotal() {
        var total=0;
        for (i = 0; i < arguments.length; i++) {
            var value = map.get(arguments[i]);
            if (value !== undefined) {
                // Round down the value.
                total = total + Math.floor(parseFloat(value));
            }
        }
        return(total);
    }

    // TODO: Currently hardwired.
    function buildSubmissionPostRequest() {

        // TODO...TEMP PLUMBING CODE. Drive the JSON result based on supplied NINO.
        var taxableBenefits = 0;
        var nino = map.get("nino");

// NOTE: The question answers can only be used once.

// TODO HARDWIRED TO ONLY BUILD SINGLE APPLICANT!
// TODO...do not set attributes where values have not been defined.


        // Build the household income.
        var otherHouseholdIncome = buildTotal("renewalData.HouseHoldIncome.saving_investment_dividend",
            "renewalData.HouseHoldIncome.pensions", "renewalData.HouseHoldIncome.trusts_settlements_or_estates",
            "renewalData.HouseHoldIncome.foreign_income", "renewalData.HouseHoldIncome.notional_income",
            "renewalData.HouseHoldIncome.profit_from_property");

        var taxableBenefits = buildTotal("renewalData.taxableBenefits.Bereavement-Allowance",
            "renewalData.taxableBenefits.Carer Allowance",
            "renewalData.taxableBenefits.Contribution-based Jobseeker Allowance",
            "renewalData.taxableBenefits.Contribution-based Employment and Support Allowance",
            "renewalData.taxableBenefits.Incapacity-Benefit");

        var earnings = buildTotal("renewalData.earnings");

        var companyBenefits = buildTotal("renewalData.companyBenefits");

        var seProfits = buildTotal("renewalData.seProfits");

        var seProfitsEstimated=false;
        if (map.get("renewalData.seProfitsEstimated") !== undefined) {
            seProfitsEstimated = true;
        }

        var submission = {

          "renewalData": {
            "incomeDetails": {
              "taxableBenefits": taxableBenefits,
              "earnings": earnings,
              "companyBenefits": companyBenefits,
              "seProfits": seProfits,
              "seProfitsEstimated": seProfitsEstimated
            },

            "certainBenefits": {
              "receivedBenefits": getMapBooleanValue("certainBenefits.receivedBenefits"),
              "incomeSupport": getMapBooleanValue("certainBenefits.incomeSupport"),
              "jsa": getMapBooleanValue("certainBenefits.jsa"),
              "esa": getMapBooleanValue("certainBenefits.esa"),
              "pensionCredit": getMapBooleanValue("certainBenefits.pensionCredit")
            }
          },
          "otherIncome": {
            "otherHouseholdIncome": otherHouseholdIncome,
            "isOtherHouseholdIncomeEst": getMapBooleanValue("renewalData.income.estimated")
          },
          "hasChangeOfCircs": false     // TODO: HARDWIRED TO FALSE - TODO...PICK UP FROM MODEL!!! HOW TO KNOW IF COC WAS MADE!?
        }
        return(JSON.stringify(submission));
    }

    function startup(renewalType, hasPartner, nino, endDate, startDate) {
        // Initialise globals.
        stack = [];

        // Add all parameters to map.
        map.set("renewalType", renewalType);
        map.set("hasPartner", hasPartner);
        map.set("nino", nino);
        map.set("endDate", endDate);
        map.set("startDate", startDate);


        // Obtain start question stored within journey.
        var journey = data();
        questionPos = journey.startQuestion;

        displayQuestion();
    }

    // Toggle estimatedIncome model value.
    function setEstimatedIncomeValue() {
        var questionData = getFromId(questionPos);
        var radio = document.getElementById('estimatedIncomeValue');

        if (radio.checked == true) {
            map.set(questionData.questionType.modelIdEstimatedIncome, "true");
        } else {
            map.set(questionData.questionType.modelIdEstimatedIncome, "false");
        }
    }

</script>

<script type="text/javascript">

   function hide(id) {
       var e = document.getElementById(id);
        e.style.display = 'none';
   }

   function show(id) {
       var e = document.getElementById(id);
            e.style.display = 'block';
   }

</script>

<script>

    function hook(journeyOutcomeStatus) {
        // TODO...Hardwired OS functions.

        var nino = map.get("nino");
        var isEstimatedIncome = false;
        if (nino == "CS700100A") {
            isEstimatedIncome = true;
        }

        var payload = {
            "journeyOutcomeStatus":journeyOutcomeStatus,
            "isEstimatedIncome":isEstimatedIncome
            };

        var response = JSON.stringify(payload);
        debugOut(response, "dumpText");

        // TODO...extend to supply a JSON object and not individual params.
        // IOS callback.
        try {
            window.webkit.messageHandlers.iosmessagehandler.postMessage(response);
        } catch(err) {}

        // Windows callback.
        try {
            window.external.notify(response);
        } catch(err) {}

        // Android callback.
        try {
            Android.hook(response);
        } catch(err) {}
    }

</script>

</head>

<body>
<header>
    <h1>Tax Credit Renewal</h1>
</header>
<main>

    <!-- MultipleChoice -->
    <div id="MultipleChoice" style="display: none;">
        <div id="dynamicHeader-MultipleChoice"></div>
        <h3 id="headerMultipleChoice" class="question"></h3>
        <div>
            <div id="containerDiv" class="container"></div>
        </div>
        <input type="button" value="Next" id="MultipleChoiceNEXT" onClick="javascript:NEXT()" class="primary">
        <input type="button" value="Back" onClick="javascript:BACK()" class="secondary">
    </div>

    <!-- Associated set of input types for containerDiv. -->
    <div style="display: none;">

        <div id="row_ID_checkbox">
            <input type="checkbox" id="row_checkbox_ID" name="row_checkbox_ID">
            <div class="col" id="row_div_checkbox_ID">
                <label id="row_label_checkbox_ID" for="row_checkbox_ID"></label>


                <div id="number_entry_hidden" class="showIfChecked">
                    <input type="number" id="row_number_checkbox_ID" value="">
                </div>
            </div>
        </div>

        <div id="row_ID_radio">
            <input type="checkbox" id="row_radio_ID" name="row_radio_ID">
            <label id="row_label_radio_ID" for="row_radio_ID"></label>
        </div>
    </div>

    <!-- Boolean -->
    <div id="Boolean" style="display: none;">
        <div id="dynamicHeader-Boolean"></div>

        <h3 id="headerBoolean"></h3>
        <div class="container">
            <div>
                <input type="radio" id="boolean_yes" name="boolean_option" onClick="javascript:YES()">
                <label for="boolean_yes">Yes</label>
            </div>
            <div>
                <input type="radio" id="boolean_no" name="boolean_option"  onClick="javascript:NO()">
                <label for="boolean_no">No</label>
            </div>
        </div>
        <input type="button" value="Next" onClick="javascript:NEXT_BOOLEAN_CONTINUE()" class="primary">
        <input type="button" value="Back" onClick="javascript:BACK()" class="secondary">
        

    </div>
    <!-- Continue -->
    <div id="Continue" style="display: none;">
        <div id="dynamicHeader-Continue"></div>

        <h3 id="headerContinue"></h3>
        <input type="button" value="Yes" onClick="javascript:NEXT_CONTINUE()" class="primary">
        <input type="button" value="Come back later" onClick="javascript:BACK()" class="secondary">
    </div>


    <!-- Decimal Input -->
    <div id="Decimal" style="display: none;">
        <div id="dynamicHeader-Decimal"></div>

        <label id="headerDecimal" for="DecimalInput"></label>
        <input type="number" id="DecimalInput">
        <br>

        <!-- Only displayed if model defines modelIdEstimatedIncome attribute. -->
        <div id="estimatedIncomeDiv" style="display: none;">
            <input type="checkbox" id="estimatedIncomeValue" name="estimatedIncomeValue" onClick="javascript:setEstimatedIncomeValue()">
            <label for="estimatedIncomeValue">Estimated Income</label>
            
        </div>

        <input type="button" value="Next" onClick="javascript:NEXT_DECIMAL()" class="primary">
        <input type="button" value="Back" onClick="javascript:BACK()" class="secondary">


    </div>

    <!-- Dynamic header DIV's -->
    <div style="display: none;">


        <div id="auto-renewal-header">

            <!-- CSS DEV: Please see example layout https://tax-credits-renewals-prototype.herokuapp.com/iterate-2016/sprint-27/auto-joint/do_you_want_to_renew_now -->
            <h2><span>Your claim will be automatically renewed unless you need to report any changes</span></h2>
            <h3><span>Check the details in your renewal pack for your claim between 6 April 2016 and 5 April 2017.</span></h3>
            <br>
            <span>Your renewal pack should arrive by 30 June 2016. </span>
            <br>
            <br>
        </div>

        <div id="benefits-and-income-intro">
            <!-- CSS DEV: https://tax-credits-renewals-prototype.herokuapp.com/iterate-2016/sprint-27/singleD1/intro -->
            <h2>Completing your review</h2>
            <p>Your information will be saved as you progress.
                If you sign out, your changes will be saved for 28 days. After that time you will need to start from the beginning.
            </p>
            <p>This review is divided into 3 parts.</p>
            <ul>
                <li><h4>Part 1</h4>
                Your benefits and income
                </li>
                <li><h4>Part 2</h4>
                Other household income, such as income from property</li>
                <li><h4>Part 3</h4>
                Report any changes to circumstances</li>
            </ul>
        </div>


        <div id="part-1-your-benefits-and-income">

            <!-- CSS DEV: https://tax-credits-renewals-prototype.herokuapp.com/iterate-2016/sprint-27/singleD1/intro -->
            <h2>Part 1: Your benefits and income</h2>
            <h3>You will be asked about:</h3>
            <ul>
                <li>benefits you claimed</li>
                <li>income from your employment and self-employment</li>
            </ul>

            <h3>You may need:</h3>
            <ul>
                <li><h4>Your benefit letters</h4>
            Showing the amounts you received</li>

            <li><h4>Your P60</h4>
            For your total earnings, which may include things like private pensions or Statutory Maternity Pay</li>

            <li><h4>Your P11D or P9D</h4>
            For company benefits you got. Also known as 'benefits in kind'</li>

            <li><h4>Your P45</h4>
            For any job you had that ended</li>

            <li><h4>Your Self Assessment returns</h4>
            For your self-employment income</li>
            </ul>

        </div>


    </div>


    <div id="demo">
        <input type="button" value="Enter app" onClick="javascript:startDemo()">
    </div>

    <br>
    <br>


    <p class="one">Debug</p>
    <br>
    <div>
        <b><span>Current Question:</span></b>
        <br>
        <span id="QuestionId"></span>
    </div>
    <br>


    <input type="button" value="Initialise model" onClick="javascript:resume('renewalType:D,hasPartner:false,nino:CS700100AD,endDate:1/1/2017,startDate:2/2/2017,renewalData.certainBenefits.benefits:true,renewalData.certainBenefits.jobseeker:false,renewalData.certainBenefits.support_allowance:false,renewalData.certainBenefits.incomeSupport:true,renewalData.certainBenefits.pension_credit:false,otherBenefits.OtherIncome.5:true,otherBenefits.OtherIncome.6:false,otherBenefits.income.9:true,otherBenefits.HouseHoldIncome.10:false,otherBenefits.HouseHoldIncome.12:true,currentQuestionPos:13,stackDATA:1-2-3-4-5-6-9-10-12')">
    <input type="button" value="Extract Model" onClick="javascript:getModelData()">
    <input type="button" value="API" onClick="javascript:extractAPI()">

    <div id="dumpDiv">
        <b><span>Debug</span></b>
        <br><br>
        <span id="dumpText"></span>
    </div>
</main>
</body>

<script>

    // Resolve associated questions for renewal flow.
    function data() {

        var nino = map.get("nino");
        var renewalType = map.get("renewalType");


var singleApplicant = [
                    {
                        "id": "1",
                        "question": "",
                        "questionType": {
                          "type": "Continue",
                          "headerDiv": "benefits-and-income-intro",
                          "nextQuestionId": "2"
                        }
                    },
                    {
                        "id": "2",
                        "question": "",
                        "questionType": {
                          "type": "Continue",
                          "headerDiv": "part-1-your-benefits-and-income",
                          "nextQuestionId": "3"
                        }
                    },

// TODO... API PART 1.

                    {
                        "id": "3",
                        "question": "Did you get any of these benefits for the whole time between 11 January 2017 and 5 April 2017?",
                        "questionType": {
                          "type": "Boolean",
                          "yesNextQuestionId": "4",
                          "noNextQuestionId": "114",
                          "modelId": "renewalData.certainBenefits.benefits"  // certainBenefits.receivedBenefits
                        }
                    },

                    {
                        "id": "4",
                        "question": "Which of these benefits did you get at the time between 6 April 2016 to 5 April 2017?",
                        "questionType": {
                        "type": "MultipleChoice",
                        "multipleChoiceOptions": [
                            {
                            "option": "Income-based Jobseeker\'s Allowance",
                            "modelId": "renewalData.certainBenefits.jobseeker"                  // certainBenefits.jsa
                            },
                            {
                            "option": "Income-related Employment and Support Allowance",
                            "modelId": "renewalData.certainBenefits.support_allowance"          // certainBenefits.esa
                            },
                            {
                            "option": "Income Support",
                            "modelId": "renewalData.certainBenefits.incomeSupport"              // certainBenefits.incomeSupport
                            },
                            {
                            "option": "Pension Credit",
                            "modelId": "renewalData.certainBenefits.pension_credit"             // certainBenefits.pensionCredit
                            }
                        ],
                        "nextQuestionId": "5"
                        }
                    },

                  {
                    "id": "5",
                    "question": "Do you still get ",
                    "previousQuestionOption" : "4",
                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "6",
                      "noNextQuestionId": "114",
                      "modelId": "otherBenefits.OtherIncome.5"
                    }
                  },
                  {
                    "id": "6",
                    "question": "Part 2: Other household income - Did you get any of these sources of income between 6 April 2016 and 5 April 2017?",
                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "7",
                      "noNextQuestionId": "9",
                      "modelId": "otherBenefits.OtherIncome.6"
                    }
                  },

// taxableBenefits

                  {
                    "id": "7",
                    "question": "Which of these benefits did you get at the time between 6 April 2014 to 5 April 2015?",
                    "questionType": {
                      "type": "MultipleChoiceWithNumber",
                      "multipleChoiceOptions": [
                        {
                          "option": "Savings, investments and dividends",
                          "modelId": "renewalData.HouseHoldIncome.saving_investment_dividend"
                        },
                        {
                          "option": "Pensions",
                          "modelId": "renewalData.HouseHoldIncome.pensions"
                        },
                        {
                          "option": "Trusts, settlements or estates",
                          "modelId": "renewalData.HouseHoldIncome.trusts_settlements_or_estates"
                        },
                        {
                          "option": "Foreign income",
                          "modelId": "renewalData.HouseHoldIncome.foreign_income"
                        },
                        {
                          "option": "Notional income",
                          "modelId": "renewalData.HouseHoldIncome.notional_income"
                        }

                      ],
                      "nextQuestionId": "8"
                    }
                  },


                  {
                    "id": "8",
                    "question": "Are any of your sources of income amounts estimated?",
                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "9",
                      "noNextQuestionId": "9",
                      "modelId": "renewalData.income.estimated.8"
                    }
                  },
                  {
                    "id": "9",
                    "question": "Did you get any income between 6 April 2016 and 5 April 2017 from renting out property?",
                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "10",
                      "noNextQuestionId": "13",
                      "modelId": "otherBenefits.income.9"
                    }
                  },

                  {
                    "id": "10",
                    "question": "Did you make a profit from renting out property between 6 April 2016 and 5 April 2017?",
                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "11",
                      "noNextQuestionId": "12",
                      "modelId": "otherBenefits.HouseHoldIncome.10"
                    }
                  },


// OTHER INCOME - INCLUDE !!!

                  {
                    "id": "11",
                    "question": "How much profit did you make from renting out property between 6 April 2016 and 5 April 2017?",
                    "questionType": {
                      "type": "Decimal",
                      "nextQuestionId": "12",
                      "modelId": "renewalData.HouseHoldIncome.profit_from_property"
                    }
                  },

                  {
                    "id": "12",
                    "question": "Is the profit from renting out property an estimate?",
                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "13",
                      "noNextQuestionId": "13",
                      "modelId": "otherBenefits.HouseHoldIncome.12"
                    }
                  },


                  {
                    "id": "13",
                    "question": "Report any changes - Check the details in your renewal paper pack for your single claim between 6 April 2016 and 5 April 2017.",
                    "questionType": {
                      "type": "MultipleChoice",
                      "multipleChoiceOptions": [
                        {
                          "option": "I have changes to report",
                          "modelId": "coc.report-yes"
                        },
                        {
                          "option": "There are no changes",
                          "modelId": "coc.report-no"
                        }
                      ],
                      "nextQuestionId": "14"
                    }

                },
                {
                    "id": "14",
                    "question": "Route to change Of Circumstance",
                    "questionType": {
                      "type": "RouteToChangeOfCircumstance"
                    }
                },

                  {
                    "id": "114",
                    "question": "Were you employed as an employee at any time between 6 April 2016 and 5 April 2017?",
                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "115",
                      "noNextQuestionId": "118",
                      "modelId": "otherBenefits.employed.114"
                    }
                  },

// earnings

                  {
                    "id": "115",
                    "question": "How much did you earn from all of your jobs as an employee between 6 April 2016 and 5 April 2017?",
                    "questionType": {
                      "type": "Decimal",
                      "nextQuestionId": "116",
                      "modelId": "renewalData.earnings"
                    }
                  },
                  {
                    "id": "116",
                    "question": "Did you receive company benefits between 6 April 2016 and 5 April 2017?",
                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "117",
                      "noNextQuestionId": "118",
                      "modelId": "renewalData.company-benefits.116"
                    }
                  },


// TODO...companyBenefits
                  {
                    "id": "117",
                    "question": "How much did you receive in company benefits between 6 April 2016 and 5 April 2017?",
                    "questionType": {
                      "type": "Decimal",
                      "nextQuestionId": "118",
                      "modelId": "renewalData.companyBenefits"
                    }
                  },
                  {
                    "id": "118",
                    "question": "Were you self-employed at any time between 6 April 2016 and 5 April 2017?",
                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "119",
                      "noNextQuestionId": "122",
                      "modelId": "renewalData.self-employed.118"      // TODO...RESET/CLEAR renewalData.employee.self-employment-profit
                    }
                  },

                  {
                    "id": "119",
                    "question": "Did you make a profit from your self-employment between 6 April 2016 and 5 April 2017?",
                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "120",
                      "noNextQuestionId": "119a",
                      "modelId": "renewalData.profit.119"          // NO, then set renewalData.employee.self-employment-profit to 0
                    }
                  },
                  {
                    "id": "119a",
                    "question": "Is your self-employed loss an estimate?",
                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "122",
                      "noNextQuestionId": "122",
                      "modelId": "renewalData.self-employed-estimate.119a"
                    }
                  },

// *** seProfits - IF NOT SET THEN DEFAULT TO 0 -

                  {
                    "id": "120",
                    "question": "How much self-employed profit did you make between 6 April 2016 and 5 April 2017?",
                    "questionType": {
                      "type": "Decimal",
                      "nextQuestionId": "121",
                      "modelId": "renewalData.seProfits"
                    }
                  },


// *** seProfitsEstimated
                  {
                    "id": "121",
                    "question": "Is your self-employed profit amount an estimate?",
                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "122",
                      "noNextQuestionId": "122",
                      "modelId": "renewalData.seProfitsEstimated"
                    }
                  },
                  {
                    "id": "122",
                    "question": "Did you get any of these benefits between 6 April 2016 and 5 April 2017? Bereavement Allowance...add div section",

// TODO...ADD DIV!!!

                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "123",
                      "noNextQuestionId": "6",
                      "modelId": "renewalData.benefits.122"
                    }
                  },

// taxableBenefits
                  {
                    "id": "123",
                    "question": "What benefits did you get between 6 April 2016 and 5 April 2017?",
                    "questionType": {
                      "type": "MultipleChoiceWithNumber",
                      "multipleChoiceOptions": [
                        {
                          "option": "Bereavement Allowance",
                          "modelId": "renewalData.taxableBenefits.Bereavement-Allowance"
                        },
                        {
                          "option": "Carer Allowance",
                          "modelId": "renewalData.taxableBenefits.Carer Allowance"
                        },
                        {
                          "option": "Contribution-based Jobseeker Allowance",
                          "modelId": "renewalData.taxableBenefits.Contribution-based Jobseeker Allowance"
                        },
                        {
                          "option": "Contribution-based Employment and Support Allowance",
                          "modelId": "renewalData.taxableBenefits.Contribution-based Employment and Support Allowance"
                        },
                        {
                          "option": "Incapacity Benefit",
                          "modelId": "renewalData.taxableBenefits.Incapacity-Benefit"
                        }
                      ],
                      "nextQuestionId": "6"
                    }
                  }
                ];


        // Auto renewal question.
        if (renewalType !== undefined && renewalType.toUpperCase() == AUTO_RENEWAL) {

////////////////////////////////////////////////////////////////////////////////
// AUTO RENEWAL
////////////////////////////////////////////////////////////////////////////////

            var autoRenewalJourney = {
                "formType":"AutoRenewal",

                "startQuestion":"a1",

                "CreationData":"12/12/2017:10:13",

<!-- TODO...ROUTE TO SINGLE APPLICANT IF YES IS SELECTED --- DEFINE THE ARRAY!!! -->

                "questions": [
                        {
                            "id": "a1",
                            "question": "Do you need to report any changes to the details shown?",
                            "questionType": {
                              "type": "Boolean",
                              "yesNextQuestionId": "1",
                              "noNextQuestionId": "a2",
                              "modelId": "renewalData.auto-renewal"
                            }
                        },
                        {
                            "id": "a2",
                            "question": "Renewal complete",
                            "questionType": {
                              "type": "JourneyCompleteAutoRenewal"
                            }
                        }
                    ]
                };

            // TODO...cleanup. move to common builder function.
            singleApplicant.forEach((question) => {
                autoRenewalJourney.questions.push(question);
            });
            return(autoRenewalJourney);

        } else if (renewalType !== undefined && renewalType.toUpperCase() == SINGLE_APPLICANT) {

////////////////////////////////////////////////////////////////////////////////
// SINGLE APPLICANT!!!
////////////////////////////////////////////////////////////////////////////////

// TODO...SPLIT THE QUESTIONS INTO BLOCKS!!!?


        var singleApplicantJourney = {
            "formType":"SingleApplicant",
            "startQuestion":"1",

            "CreationData":"12/12/2017:10:13",

            "questions": []
            };

            singleApplicantJourney.questions = singleApplicant;
            return(singleApplicantJourney);


///////////////////////////////////////////////////////
//SINGLE APPLICANT END!
///////////////////////////////////////////////////////

        } else {

            // Additional test questions.

            var myObj = {
            "formType":"JointApplicant",

            "CreationData":"12/12/2017:10:13",

            "questions": [
                  {
                    "id": "1",
                    "question": "Did you get any of these benefits at the time between 6 April 2014 to 5 April 2015 ? \n\r - Income Support \n\r - Income - based Jobseeker's Allowance",
                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "11a",
                      "noNextQuestionId": "3a",
                      "modelId": "renewalData.certainBenefits.receivedBenefits"
                    }
                  },
                  {
                    "id": "11a",
                    "question": "How much did you receive in company benefits between 6 April 2014 to 5 April 2015?",
                    "additionalInformation": "Some more info on what this question is",
                    "questionType": {
                      "type": "Decimal",
                      "nextQuestionId": "2",
                      "modelId": "some-income-value",
                      "modelIdEstimatedIncome": "estimated-income"
                    }
                  },
                  {
                    "id": "3a",
                    "question": "Which of these benefits did you get at the time between 6 April 2014 to 5 April 2015?",
                    "questionType": {
                      "type": "MultipleChoiceWithNumber",
                      "multipleChoiceOptions": [
                        {
                          "option": "Other Income Support",
                          "modelId": "otherBenefits.OtherIncome"
                        },
                        {
                          "option": "Other Income-based Jobseeker's Allowance",
                          "modelId": "otherBenefits.jsa"
                        }
                      ],
                      "nextQuestionId": "2"
                    }
                  },


                  {
                    "id": "2",
                    "question": "Which of these benefits did you get at the time between 6 April 2014 to 5 April 2015?",
                    "questionType": {
                      "type": "MultipleChoice",
                      "multipleChoiceOptions": [
                        {
                          "option": "Income Support",
                          "modelId": "renewalData.certainBenefits.incomeSupport"
                        },
                        {
                          "option": "Income-based Jobseeker's Allowance",
                          "modelId": "renewalData.certainBenefits.jsa"
                        }
                      ],
                      "nextQuestionId": "3"
                    }
                  },
                  {
                    "id": "3",
                    "question": "Did your partner get any of these benefits at the time between 6 April 2014 to 5 April 2015 ? \n\r - Income Support \n\r - Income - based Jobseeker's Allowance",
                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "4",
                      "noNextQuestionId": "5",
                      "modelId": "renewalData.certainBenefits.receivedBenefits" // TODO...DUPLICATE!
                    }
                  },
                  {
                    "id": "4",
                    "question": "Which of these benefits did your partner get at the time between 6 April 2014 to 5 April 2015?",
                    "questionType": {
                      "type": "MultipleChoice",
                      "multipleChoiceOptions": [
                        {
                          "option": "Income Support",
                          "modelId": "renewalData.certainBenefits.incomeSupport-TODO-4"
                        },
                        {
                          "option": "Income-based Jobseeker's Allowance TODO 4",
                          "modelId": "renewalData.certainBenefits.jsa.TODO-4"
                        }
                      ],
                      "nextQuestionId": "5"
                    }
                  },
                  {
                    "id": "5",
                    "question": "Did you get any of these other benefits at the time between 6 April 2014 to 5 April 2015 ? \n\r - Other Income Support \n\r - Other Income - based Jobseeker's Allowance",
                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "6",
                      "noNextQuestionId": "7"
                    }
                  },
                  {
                    "id": "6",
                    "question": "Which of these benefits did you get at the time between 6 April 2014 to 5 April 2015?",
                    "questionType": {
                      "type": "MultipleChoice",
                      "multipleChoiceOptions": [
                        {
                          "option": "Other Income Support",
                          "modelId": "otherBenefits.OtherIncome_TODO_1"
                        },
                        {
                          "option": "Other Income-based Jobseeker's Allowance",
                          "modelId": "otherBenefits.jsa_TODO_1"
                        }
                      ],
                      "nextQuestionId": "7"
                    }
                  },
                  {
                    "id": "7",
                    "question": "Were you employed at any time between 6 April 2014 to 5 April 2015?",
                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "8",
                      "noNextQuestionId": "10"
                    }
                  },
                  {
                    "id": "8",
                    "question": "How much did you earn from all of your jobs as an employee between 6 April 2014 to 5 April 2015?",
                    "questionType": {
                      "type": "Decimal",
                      "nextQuestionId": "9",
                      "modelId": "otherIncome.otherHouseholdIncome",
                      "modelIdEstimatedIncome" : "otherIncome.otherHouseholdIncome.estimatedIncome"
                    }
                  },
                  {
                    "id": "9",
                    "question": "How much did you receive in company benefits between 6 April 2014 to 5 April 2015?",
                    "additionalInformation": "Some more info on what this question is",
                    "questionType": {
                      "type": "Decimal",
                      "nextQuestionId": "10",
                      "modelId": "TODO-QUESTION-9"
                    }
                  },
                  {
                    "id": "10",
                    "question": "Were you self employed at any time between 6 April 2014 to 5 April 2015?",
                    "additionalInformation": "This does not include renting out property or a room in your home.",
                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "11",
                      "noNextQuestionId": "12"
                      // TODO...IF NO MODEL ID THEN DO NOT STORE!
                    }
                  },
                  {
                    "id": "11",
                    "question": "How much self-employed profit did you make between 6 April 2014 to 5 April 2015?",
                    "additionalInformation": "If you made a loss, enter zero (eg, 0)",
                    "questionType": {
                      "type": "Decimal",
                      "nextQuestionId": "12",
                      // TODO...SORT THIS OUT!!! WHAT IS THIS?
                      "allowEstimate": true,
                      "modelId": "otherIncome.selfEmployedProfit",
                      "estimateModelId": "otherIncome.isSelfEmployedProfitEst"
                    }
                  },
                  {
                    "id": "12",
                    "question": "Did you get any of these taxable benefits at the time between 6 April 2014 to 5 April 2015? \n\r - Bereavement Allowance \n\r - Carer's Allowance",
                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "13",
                      "noNextQuestionId": "14"
                    }
                  },
                  {
                    "id": "13",
                    "question": "How much did you receive for all your taxable benefits between 6 April 2014 to 5 April 2015?",
                    "questionType": {
                      "type": "Decimal",
                      "nextQuestionId": "14",
                    "modelId": "TODO_Q-14"
                    }
                  },
                  {
                    "id": "14",
                    "question": "Did your partner get any of these taxable benefits at the time between 6 April 2014 to 5 April 2015? \n\r - Bereavement Allowance \n\r - Carer's Allowance",
                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "15",
                      "noNextQuestionId": "16"
                    }
                  },
                  {
                    "id": "15",
                    "question": "How much did your partner receive for all your taxable benefits between 6 April 2014 to 5 April 2015?",
                    "questionType": {
                      "type": "Decimal",
                      "nextQuestionId": "16",
                      "modelId": "TODO_Q-15"
                    }
                  },
                  {
                    "id": "16",
                    "question": "Did you get any of these benefits at the time between 6 April 2015 to 5 April 2016 ? \n\r - Income Support \n\r - Income - based Jobseeker's Allowance",
                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "17",
                      "noNextQuestionId": "18",
                      "modelId": "renewalData.certainBenefits.receivedBenefits"
                    }
                  },
                  {
                    "id": "17",
                    "question": "Which of these benefits did you get at the time between 6 April 2015 to 5 April 2016?",
                    "questionType": {
                      "type": "MultipleChoice",
                      "multipleChoiceOptions": [
                        {
                          "option": "Income Support",
                          "modelId": "renewalData.certainBenefits.incomeSupport"
                        },
                        {
                          "option": "Income-based Jobseeker's Allowance",
                          "modelId": "renewalData.certainBenefits.jsa"
                        }
                      ],
                      "nextQuestionId": "18"
                    }
                  },
                  {
                    "id": "18",
                    "question": "Did your partner get any of these benefits at the time between 6 April 2015 to 5 April 2016 ? \n\r - Income Support \n\r - Income - based Jobseeker's Allowance",
                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "19",
                      "noNextQuestionId": "20",
                      "modelId": "renewalData.certainBenefits.receivedBenefits"
                    }
                  },
                  {
                    "id": "19",
                    "question": "Which of these benefits did your partner get at the time between 6 April 2015 to 5 April 2016?",
                    "questionType": {
                      "type": "MultipleChoice",
                      "multipleChoiceOptions": [
                        {
                          "option": "Income Support",
                          "modelId": "renewalData.certainBenefits.incomeSupport"
                        },
                        {
                          "option": "Income-based Jobseeker's Allowance",
                          "modelId": "renewalData.certainBenefits.jsa"
                        }
                      ],
                      "nextQuestionId": "20"
                    }
                  },
                  {
                    "id": "20",
                    "question": "Did you get any of these other benefits at the time between 6 April 2015 to 5 April 2016 ? \n\r - Other Income Support \n\r - Other Income - based Jobseeker's Allowance",
                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "21",
                      "noNextQuestionId": "22"
                    }
                  },
                  {
                    "id": "21",
                    "question": "Which of these benefits did you get at the time between 6 April 2015 to 5 April 2016?",
                    "questionType": {
                      "type": "MultipleChoice",
                //      "type": "MultipleChoiceWithNumber", TODO
                      "multipleChoiceOptions": [
                        {
                          "option": "Other Income Support",
                          "modelId": "otherBenefits.OtherIncome_TODO_2"
                        },
                        {
                          "option": "Other Income-based Jobseeker's Allowance",
                          "modelId": "otherBenefits.jsa_TODO_2"
                        }
                      ],
                      "nextQuestionId": "22"
                    }
                  },
                  {
                    "id": "22",
                    "question": "Were you employed at any time between 6 April 2015 to 5 April 2016?",
                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "23",
                      "noNextQuestionId": "25"
                    }
                  },
                  {
                    "id": "23",
                    "question": "How much did you earn from all of your jobs as an employee between 6 April 2015 to 5 April 2016?",
                    "questionType": {
                      "type": "Decimal",
                      "nextQuestionId": "24",
                      "modelId": "otherIncome.otherHouseholdIncome_TODO_DUPLICATE"
                    }
                  },
                  {
                    "id": "24",
                    "question": "How much did you receive in company benefits between 6 April 2015 to 5 April 2016?",
                    "additionalInformation": "Some more info on what this quesiton is",
                    "questionType": {
                      "type": "Decimal",
                      "nextQuestionId": "25",
                      "modelId": "TODO.QUESTION.25"
                    }
                  },
                  {
                    "id": "25",
                    "question": "Were you self employed at any time between 6 April 2015 to 5 April 2016?",
                    "additionalInformation": "This does not include renting out property or a room in your home.",
                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "26",
                      "noNextQuestionId": "27"
                    }
                  },
                  {
                    "id": "26",
                    "question": "How much self-employed profit did you make between 6 April 2015 to 5 April 2016?",
                    "additionalInformation": "If you made a loss, enter zero (eg, 0)",
                    "questionType": {
                      "type": "Decimal",
                      "nextQuestionId": "27",
                      "allowEstimate": true,
                      "modelId": "otherIncome.selfEmployedProfit_TODO_DUPLICATE",
                      "estimateModelId": "otherIncome.isSelfEmployedProfitEst"
                    }
                  },
                  {
                    "id": "27",
                    "question": "Did you get any of these taxable benefits at the time between 6 April 2015 to 5 April 2016? \n\r - Bereavement Allowance \n\r - Carer's Allowance",
                    "questionType": {
                      // TODO...NO MODEL ID!!! IF NO ID THEN STORE NOTHING!!!
                      "type": "Boolean",
                      "yesNextQuestionId": "28",
                      "noNextQuestionId": "29"
                    }
                  },
                  {
                    "id": "28",
                    "question": "How much did you receive for all your taxable benefits between 6 April 2015 to 5 April 2016?",
                    "questionType": {
                      "type": "Decimal",
                      "nextQuestionId": "29",
                      "modelId": "TODO.QUESTION.29"
                    }
                  },
                  {
                    "id": "29",
                    "question": "Did your partner get any of these taxable benefits at the time between 6 April 2015 to 5 April 2016? \n\r - Bereavement Allowance \n\r - Carer's Allowance",
                    "questionType": {
                      "type": "Boolean",
                      "yesNextQuestionId": "30",
                      "noNextQuestionId": "31"
                    }
                  },
                  {
                    "id": "30",
                    "question": "How much did your partner receive for all your taxable benefits between 6 April 2015 to 5 April 2016?",
                    "questionType": {
                      "type": "Decimal",
                      "nextQuestionId": "31",
                      "modelId": "TODO.QUESTION.31"
                    }
                  },
                    {
                    "id": "31",
                    "question": "The end of the demo screens",
                    "questionType": {
                      "type": "JourneyComplete"
                    }
                  }
                ]
            }
        }

        return(myObj);

    }

</script>
</html>
